{#@@ vim: set ft=gitconfig: @@#}
[user]
    {%@@ if git_name is defined @@%}
    name = {{@@ git_name @@}}
    {%@@ endif @@%}
    {%@@ if git_email is defined @@%}
    email = {{@@ git_email @@}}
    {%@@ endif @@%}
    useConfigOnly = true
[alias]
    l = log --graph --oneline --decorate
    root = rev-parse --show-toplevel
[column]
    ui = auto
[branch]
    sort = -committerdate
[tag]
    sort = version:refname
[init]
    defaultBranch = main
[diff]
    algorithm = histogram
    colorMoved = plain
    mnemonicPrefix = true
    renames = true
[push]
    autoSetupRemote = true
    followTags = true
[fetch]
    prune = true
    pruneTags = true
    all = true
[help]
    autocorrect = prompt
[commit]
    verbose = true
[rerere]
    enabled = true
    autoupdate = true
[rebase]
    autoSquash = true
    autoStash = true
    updateRefs = true
[merge]
    conflictstyle = zdiff3
[core]
    autocrlf = input
{%@@ if os | lower != 'windows' @@%}
    pager = delta
[interactive]
    diffFilter = delta --color-only
[include]
    path = ~/.cache/antidote/dandavison/delta/themes.gitconfig
    path = ~/.cache/antidote/catppuccin/delta/catppuccin.gitconfig
[delta]
    features = catppuccin-mocha catppuccin-high-contrast

    # Non-cosmetic options must be applied outside of feature definitions,
    # otherwise config may not be set properly. Note that these will apply to
    # all `--show-themes` results.
    file-style = omit
    line-numbers = true

    # As of v0.18.2, this needs to be set for `--show-themes` to display the
    # correct colors regardless of COLORTERM
    true-color = always

    navigate = true     # use n and N to move between diff sections
[delta "catppuccin-high-contrast"]
    # Adjust colors for better contrast on transparent terminal background
    # Derived from https://github.com/nim65s/dotfiles/blob/fa2159e0651610049c253e4c8b899330918e85a8/.gitconfig#L5-L14
    # See also: https://github.com/catppuccin/delta/issues/19
    minus-emph-style = bold syntax "#694559"    # 25% red to 35%
    minus-style = syntax "#493447"              # 10% red to 20%
    plus-emph-style = bold syntax "#4e6356"     # 25% green to 35%
    plus-style = syntax "#394545"               # 10% green to 20%
{%@@ endif @@%}

{%@@ if git_profiles is defined @@%}
{%@@ for dir in git_profiles @@%}
[includeIf "gitdir:{{@@ dir @@}}/"]
    path = {{@@ dir @@}}/.gitprofile
{%@@ endfor @@%}
{%@@ endif @@%}
